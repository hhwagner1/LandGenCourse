<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Week 2: Bonus Material • LandGenCourse</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Week 2: Bonus Material">
<meta property="og:description" content="LandGenCourse">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-168837293-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-168837293-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">LandGenCourse</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Week0_BasicR.html">Week 0: Intro to R Programming</a>
    </li>
    <li>
      <a href="../articles/Week0_Graphics.html">Week 0: R Graphics</a>
    </li>
    <li>
      <a href="../articles/Week1_vignette.html">Week 1: Importing Genetic Data</a>
    </li>
    <li>
      <a href="../articles/Week2_vignette.html">Week 2: Spatial Data</a>
    </li>
    <li>
      <a href="../articles/Week2_bonus_vignette.html">Week 2: Bonus Material</a>
    </li>
    <li>
      <a href="../articles/Week3_vignette.html">Week 3: Genetic Diversity</a>
    </li>
    <li>
      <a href="../articles/Week4_vignette.html">Week 4: Metapopulation Genetics</a>
    </li>
    <li>
      <a href="../articles/Week5_vignette.html">Week 5: Spatial Statistics</a>
    </li>
    <li>
      <a href="../articles/Week6_vignette.html">Week 6: Quantitative Genetics</a>
    </li>
    <li>
      <a href="../articles/Week7_vignette.html">Week 7: Spatial Linear Models</a>
    </li>
    <li>
      <a href="../articles/Week8_vignette.html">Week 8: Simulation</a>
    </li>
    <li>
      <a href="../articles/Week8_bonus_vignette.html">Week 8: Bonus Material</a>
    </li>
    <li>
      <a href="../articles/Week9_vignette.html">Week 9: Population Structure</a>
    </li>
    <li>
      <a href="../articles/Week10_vignette.html">Week 10: Landscape Resistance</a>
    </li>
    <li>
      <a href="../articles/Week11_vignette.html">Week 11: Detecting Adaptation</a>
    </li>
    <li>
      <a href="../articles/Week12_vignette.html">Week 12: Model Selection</a>
    </li>
    <li>
      <a href="../articles/Week13_vignette.html">Week 13: Gravity Models</a>
    </li>
    <li>
      <a href="../articles/Week14_vignette.html">Week 14: Contemporary Gene Flow</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../tutorials/00-Intro_RStudio.html">Introduction to RStudio</a>
    </li>
    <li>
      <a href="../tutorials/00-Intro_LandGenCourse.html">Introduction to the LandGenCourse package</a>
    </li>
    <li>
      <a href="../tutorials/00-Intro_RNotebooks.html">Introduction to R Notebooks</a>
    </li>
    <li>
      <a href="../tutorials/00-Version_Control.html">Version Control 101</a>
    </li>
    <li>
      <a href="../tutorials/01-Genetic_Data.html">Week 1 Getting Landscape Genetic Data into R</a>
    </li>
    <li>
      <a href="../tutorials/02-Spatial_Data.html">Week 2 Land Cover Analysis in R</a>
    </li>
    <li>
      <a href="../tutorials/03-Genetic_Diversity.html">Week 3 Genetic Diversity (Part 1)</a>
    </li>
    <li>
      <a href="../tutorials/03-Genetic_Diversity_Part2.html">Week 3 Genetic Diversity (Part 2)</a>
    </li>
    <li>
      <a href="../tutorials/04-Metapop_Genetics.html">Week 4 Metapopulation Genetics (Part 1)</a>
    </li>
    <li>
      <a href="../tutorials/04-Metapop_Genetics_Part2.html">Week 4 Metapopulation Genetics (Part 2)</a>
    </li>
    <li>
      <a href="../tutorials/05-Spatial_Stats.html">Week 5 Spatial Statistics</a>
    </li>
    <li>
      <a href="../tutorials/06-Quantitative_Genetics.html">Week 6 Quantitative Genetics (Part 1)</a>
    </li>
    <li>
      <a href="../tutorials/06-Quantitative_Genetics_Part2.html">Week 6 Quantitative Genetics (Part 1)</a>
    </li>
    <li>
      <a href="../tutorials/07-Spatial_Models.html">Week 7 Spatial Linear Models (Part 1)</a>
    </li>
    <li>
      <a href="../tutorials/07-Spatial_Models_Part2.html">Week 7 Spatial Linear Models (Part 2)</a>
    </li>
    <li>
      <a href="../tutorials/08-Modeling.html">Week 8 Simulation Experiments in R (Part 1)</a>
    </li>
    <li>
      <a href="../tutorials/08-Modeling_Part2.html">Week 8 Simulation Experiments in R (Part 1)</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Week 2: Bonus Material</h1>
                        <h4 class="author">Helene Wagner</h4>
            
            <h4 class="date">2020-06-08</h4>
      
      
      <div class="hidden name"><code>Week2_bonus_vignette.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>1. Overview</h2>
<div id="a-goals" class="section level3">
<h3 class="hasAnchor">
<a href="#a-goals" class="anchor"></a>a) Goals</h3>
<p>This bonus material expands the Worked Exakmple to show:</p>
<ul>
<li>How to use a new standard for spatial data (‘sf’ package).</li>
<li>How to plot site attributes in space (‘sf’ package)</li>
<li>How to export the site data to a shapefile for import into a GIS (‘sf’ package).</li>
<li>How to plot a categorical raster map with a predefined color scheme.</li>
</ul>
<p>Try modifying the code to import your own data!</p>
</div>
<div id="b-required-r-libraries" class="section level3">
<h3 class="hasAnchor">
<a href="#b-required-r-libraries" class="anchor"></a>b) Required R libraries</h3>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="no">LandGenCourse</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="no">sp</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="no">sf</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="no">raster</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="no">GeNetIt</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="no">rasterVis</span>)</pre></body></html></div>
</div>
</div>
<div id="convert-spatialpointsdataframe-to-sf-object" class="section level2">
<h2 class="hasAnchor">
<a href="#convert-spatialpointsdataframe-to-sf-object" class="anchor"></a>2. Convert ‘SpatialPointsDataFrame’ to ‘sf’ object</h2>
<p>While ‘sp’ was a major achievement, it is being replaced now by ‘sf’, which is short for “simple feature”. The conversion is easy. The resulting S3 object is a data frame and also an ‘sf’ object.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="no">ralu.site</span>)
<span class="no">Sites.sf</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sf/man/st_as_sf.html">st_as_sf</a></span>(<span class="no">ralu.site</span>)
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span>(<span class="no">Sites.sf</span>)</pre></body></html></div>
<pre><code>## [1] "sf"         "data.frame"</code></pre>
</div>
<div id="plot-variables-first-10-in-data-set" class="section level2">
<h2 class="hasAnchor">
<a href="#plot-variables-first-10-in-data-set" class="anchor"></a>3. Plot variables (first 10 in data set)</h2>
<p>If we use ‘plot’ on this ‘sf’ object, it will plot site attribute data in space! Here we set the point character ‘pch’ to a filled circle, which is symbol #16.</p>
<p>For an overview of ‘pch’ symbol numbers, and colors, check: <a href="http://vis.supstat.com/2013/04/plotting-symbols-and-color-palettes/" class="uri">http://vis.supstat.com/2013/04/plotting-symbols-and-color-palettes/</a></p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span>(<span class="kw">mar</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span>))
<span class="fu"><a href="https://rdrr.io/pkg/sf/man/plot.html">plot</a></span>(<span class="no">Sites.sf</span>, <span class="kw">pch</span><span class="kw">=</span><span class="fl">16</span>)</pre></body></html></div>
<pre><code>## Warning: plotting the first 10 out of 17 attributes; use max.plot = 17 to plot
## all</code></pre>
<p><img src="Week2_bonus_vignette_files/figure-html/unnamed-chunk-3-1.png" width="672"></p>
<p>This is pretty cool! Let’s have a closer look at some of the variables.</p>
<ul>
<li>Variabes ‘Drainage’ and ‘Basin’ (left): these are factors, and each factor level is assigned a different color.</li>
<li>Variables ‘AREA_m2’ and ‘Depth_m’ (right): these are quantitative variables, and R automatically uses a color ramp (from blue to pink to orange) to indicate variation in the values.</li>
</ul>
<p>Note: To learn about options for the ‘plot’ function for ‘sf’ objects, access the help file by typing ‘?plot’ and select ‘Plot sf object’.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/pkg/sf/man/plot.html">plot</a></span>(<span class="no">Sites.sf</span>[,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Drainage"</span>, <span class="st">"Basin"</span>)], <span class="kw">pch</span><span class="kw">=</span><span class="fl">16</span>)
<span class="fu"><a href="https://rdrr.io/pkg/sf/man/plot.html">plot</a></span>(<span class="no">Sites.sf</span>[,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"AREA_m2"</span>, <span class="st">"Depth_m"</span>)], <span class="kw">pch</span><span class="kw">=</span><span class="fl">16</span>)</pre></body></html></div>
<p><img src="Week2_bonus_vignette_files/figure-html/unnamed-chunk-4-1.png" width="700"><img src="Week2_bonus_vignette_files/figure-html/unnamed-chunk-4-2.png" width="700"></p>
</div>
<div id="export-site-data-as-esri-shapefile" class="section level2">
<h2 class="hasAnchor">
<a href="#export-site-data-as-esri-shapefile" class="anchor"></a>4. Export site data as ESRI shapefile</h2>
<p>Just in case you want to know how you could get your results into a GIS. This is really easy with the ‘sf’ package. The following code may produce a warning that column names were abbreviated, and writes the component files for the ESRI shapefile into the pre-existing folder ‘output’ (the first line will create it if does not exist yet). Remember to remove the hashtags ‘#’ to uncomment the code before running it.</p>
<p>The argument ‘delete_dsn’ specifies whether any existing file with the same name should be deleted first (i.e., overwritten).</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r">#require(here)
#if(!dir.exists(paste0(here(),"/output"))) dir.create(paste0(here(),"/output"))
#st_write(Sites.sf, paste0(here(),"/output/Sites.shp"), delete_dsn = TRUE)</pre></body></html></div>
</div>
<div id="display-categorical-map-with-a-predefined-color-table" class="section level2">
<h2 class="hasAnchor">
<a href="#display-categorical-map-with-a-predefined-color-table" class="anchor"></a>5. Display categorical map with a predefined color table</h2>
<p>Now to a more tricky topica. Recall that the last raster layer in the Worked Example, ‘nlcd’, contains categorial land cover data that are coded numerically. The ‘raster’ package actually misinterpreted them as numeric data.</p>
<p>Let’s again extract the categorical raster layer into a new object ‘NLCD’.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="no">rasters</span>)
<span class="no">NLCD</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html">raster</a></span>(<span class="no">rasters</span>[<span class="fl">6</span>])
<span class="no">NLCD</span></pre></body></html></div>
<pre><code>## class      : RasterLayer 
## dimensions : 426, 358, 152508  (nrow, ncol, ncell)
## resolution : 30, 30  (x, y)
## extent     : 683282.5, 694022.5, 4992833, 5005613  (xmin, xmax, ymin, ymax)
## crs        : +proj=utm +zone=11 +datum=NAD83 +units=m +no_defs +ellps=GRS80 +towgs84=0,0,0 
## source     : memory
## names      : nlcd 
## values     : 11, 95  (min, max)</code></pre>
<p>Then we use function ‘ratify’ to tell R that this is a categorical map (factor) that needs a ‘raster attribute table’ (rat). Nothing to do with rats…</p>
<p>Then create the raster attribute table from the factor levels. This is simply a vector with all factor levels present in ‘NLCD’. The levels are codes as numbers between 11 and 95. Here’s the legend information: <a href="https://www.mrlc.gov/nlcd06_leg.php" class="uri">https://www.mrlc.gov/nlcd06_leg.php</a></p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="no">NLCD</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/factor.html">ratify</a></span>(<span class="no">NLCD</span>)
<span class="no">rat</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/factor.html">levels</a></span>(<span class="no">NLCD</span>)<span class="kw">[[</span><span class="fl">1</span>]]
<span class="no">rat</span></pre></body></html></div>
<pre><code>##   ID
## 1 11
## 2 12
## 3 31
## 4 42
## 5 52
## 6 71
## 7 90
## 8 95</code></pre>
<p>Let’s add some columns with labels and predefined colors (using hex color code). A color table (“Colortable_LULC.csv”) is already in the data folder.</p>
<p>It has more rows than we need, because not all US land cover classes occur in the study area. We need to make sure the colors and cover types are stored as ‘character’, because the missing factor levels would later create problems.</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="no">ColTab</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata"</span>, <span class="st">"Colortable_LULC.csv"</span>,
                            <span class="kw">package</span> <span class="kw">=</span> <span class="st">"LandGenCourse"</span>), <span class="kw">header</span><span class="kw">=</span><span class="fl">TRUE</span>)
<span class="no">ColTab</span>$<span class="no">color</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.character.html">as.character</a></span>(<span class="no">ColTab</span>$<span class="no">color</span>)
<span class="no">ColTab</span>$<span class="no">attribute</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.character.html">as.character</a></span>(<span class="no">ColTab</span>$<span class="no">attribute</span>)
<span class="no">ColTab</span></pre></body></html></div>
<pre><code>##    value   color                    attribute
## 1     11 #456DA8                   Open Water
## 2     12 #E6EEF9           Perennial Ice/Snow
## 3     21 #E1CBCD        Developed, Open Space
## 4     22 #DC9786     Developed, Low Intensity
## 5     23 #F40100  Developed, Medium Intensity
## 6     24 #B00206    Developed, High Intensity
## 7     31 #B2AEA3 Barren Land (Rock/Sand/Clay)
## 8     41 #6BA95C             Deciduous Forest
## 9     42 #16692E             Evergreen Forest
## 10    43 #B9CA8F                 Mixed Forest
## 11    51 #AD9439                  Dwarf Scrub
## 12    52 #D5B883                  Shrub/Scrub
## 13    71 #EDEFCA         Grassland/Herbaceous
## 14    72 #D3D27C             Sedge/Herbaceous
## 15    73 #A5CD53                      Lichens
## 16    74 #88B8A1                         Moss
## 17    81 #DED73E                  Pasture/Hay
## 18    82 #AD722C             Cultivated Crops
## 19    90 #BED8F6               Woody Wetlands
## 20    95 #6EA5C4 Emergent Herbaceous Wetlands</code></pre>
<p>Now we need to match the codes in ‘NLCD.rat’ and ‘ColTab’ and extract the additional variables for the land use categories that occur in NLCD. We can use the function ‘merge’ to do this.</p>
<p>Finally we tell R that the factor levels of NLCD are defined in ‘rat’, and R stores the information in the slot ‘<a href="mailto:NLCD@data@attributes" class="email">NLCD@data@attributes</a>’.</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="no">rat</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sp/man/merge.html">merge</a></span>(<span class="no">rat</span>, <span class="no">ColTab</span>, <span class="kw">by.x</span><span class="kw">=</span><span class="st">"ID"</span>, <span class="kw">by.y</span><span class="kw">=</span><span class="st">"value"</span>, <span class="kw">all</span><span class="kw">=</span><span class="fl">FALSE</span>, <span class="kw">sort</span><span class="kw">=</span><span class="fl">TRUE</span>)
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/factor.html">levels</a></span>(<span class="no">NLCD</span>) <span class="kw">&lt;-</span> <span class="no">rat</span>
<span class="no">NLCD</span>@<span class="kw">data</span>@<span class="kw">attributes</span></pre></body></html></div>
<pre><code>## [[1]]
##   ID   color                    attribute
## 1 11 #456DA8                   Open Water
## 2 12 #E6EEF9           Perennial Ice/Snow
## 3 31 #B2AEA3 Barren Land (Rock/Sand/Clay)
## 4 42 #16692E             Evergreen Forest
## 5 52 #D5B883                  Shrub/Scrub
## 6 71 #EDEFCA         Grassland/Herbaceous
## 7 90 #BED8F6               Woody Wetlands
## 8 95 #6EA5C4 Emergent Herbaceous Wetlands</code></pre>
<p>Now we can use the function ‘levelplot’ (package ‘rasterVis’) to plot the land cover map with the correct color scheme and legend. We will overlay the sampling locations, using yellow circles with black outlines.</p>
<p>This code uses advanced plotting ‘language’, where we first define ‘Map’ as the levelplot of the categorical map. The argument ‘att’ specifies which column in the ‘rat’ should be used for the labels, ‘colorkey’ scales the size of the legend, and ‘col.regions’ defines the color scheme.</p>
<p>Then, we can plot ‘Map’ simply by writing its name.</p>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="no">Map</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rasterVis/man/levelplot-methods.html">levelplot</a></span>(<span class="no">NLCD</span>, <span class="kw">att</span><span class="kw">=</span><span class="st">'attribute'</span>, <span class="kw">colorkey</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">height</span><span class="kw">=</span><span class="fl">0.5</span>),
          <span class="kw">col.regions</span><span class="kw">=</span><span class="no">NLCD</span>@<span class="kw">data</span>@<span class="kw">attributes</span><span class="kw">[[</span><span class="fl">1</span>]]$<span class="no">color</span>)
<span class="no">Map</span></pre></body></html></div>
<p><img src="Week2_bonus_vignette_files/figure-html/unnamed-chunk-10-1.png" width="672"></p>
<p>Additional layers are added to the map with ‘+ layer()’: first we add a layer with the yellow filled circles at the sampling locations, then another layer with the black symbol outlines.</p>
<div class="sourceCode" id="cb17"><html><body><pre class="r"><span class="no">Sites.sp</span> <span class="kw">&lt;-</span> <span class="no">ralu.site</span>

<span class="no">Map</span> + <span class="fu">layer</span>(<span class="fu"><a href="https://rdrr.io/pkg/sp/man/panel.html">sp.points</a></span>(<span class="no">Sites.sp</span>, <span class="kw">pch</span><span class="kw">=</span><span class="fl">16</span>, <span class="kw">col</span><span class="kw">=</span><span class="st">"yellow"</span>, <span class="kw">cex</span><span class="kw">=</span><span class="fl">1.1</span>)) +
  <span class="fu">layer</span>(<span class="fu"><a href="https://rdrr.io/pkg/sp/man/panel.html">sp.points</a></span>(<span class="no">Sites.sp</span>, <span class="kw">pch</span><span class="kw">=</span><span class="fl">1</span>, <span class="kw">col</span><span class="kw">=</span><span class="st">"black"</span>, <span class="kw">cex</span><span class="kw">=</span><span class="fl">1.1</span>))</pre></body></html></div>
<p><img src="Week2_bonus_vignette_files/figure-html/unnamed-chunk-11-1.png" width="672"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="http://sites.utm.utoronto.ca/wagnerlab/">Helene Wagner</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
